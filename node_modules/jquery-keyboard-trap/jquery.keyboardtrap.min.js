(function($,window,document,undefined){var trapTemplate='<div tabindex="0" class="keyboard-trap-boundary">',defaults={deactivateOnFocusExit:true},$outerTrapBefore=$(trapTemplate),$innerTrapBefore=$(trapTemplate),$innerTrapAfter=$(trapTemplate),$outerTrapAfter=$(trapTemplate),$trap,$firstTabElement,$lastTabElement;$outerTrapBefore.on("focus",setFocusToFirstFocusableElement);$innerTrapBefore.on("focus",setFocusToLastFocusableElement);$innerTrapAfter.on("focus",setFocusToFirstFocusableElement);$outerTrapAfter.on("focus",setFocusToLastFocusableElement);function setFocusToFirstFocusableElement(){$firstTabElement.focus()}function setFocusToLastFocusableElement(){$lastTabElement.focus()}$.trapKeyboard=function trapKeyboard(el,options){var opts=$.extend({},defaults,options),$focusable;$.untrapKeyboard();$trap=$(el);$focusable=$trap.focusable();$firstTabElement=$focusable.first();$lastTabElement=$focusable.last();if(opts.deactivateOnFocusExit===true){$trap.focusExit();$trap.one("focusexit",function(e){if(opts.deactivateOnFocusExit===true){$.untrapKeyboard()}})}$outerTrapBefore.insertBefore($trap);$trap.prepend($innerTrapBefore);$trap.append($innerTrapAfter);$outerTrapAfter.insertAfter($trap);$trap.addClass("keyboard-trap--active");$trap.trigger("on.keyboardTrap");return $trap};$.untrapKeyboard=function untrapKeyboard(){if($trap!==undefined){$outerTrapBefore.detach();$innerTrapBefore.detach();$innerTrapAfter.detach();$outerTrapAfter.detach();$trap.off("focusexit");$trap.removeClass("keyboard-trap--active");$trap.trigger("off.keyboardTrap")}return $trap}})(jQuery,window,document);